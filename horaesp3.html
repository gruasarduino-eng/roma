<!DOCTYPE html>
<html lang="es">
<head>
    <title>ROMA - Coworking</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="assets/img/apple-icon.png">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicon.ico">

    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/templatemo.css">
    <link rel="stylesheet" href="assets/css/custom.css">

    <!-- Load fonts style after rendering the layout styles -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;200;300;400;500;700;900&display=swap">
    <link rel="stylesheet" href="assets/css/fontawesome.min.css">
<!--
    
TemplateMo 559 Zay Shop

https://templatemo.com/tm-559-zay-shop

-->
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f9; padding: 20px; text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
        th { background-color: #007BFF; color: white; }
        .libre { background-color: #d4edda; }
        .ocupado { background-color: #f8d7da; }
        .header-images { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .header-images img { width: 150px; height: auto; border-radius: 5px; }
    </style>

</head>
<body>
 <!-- Start Top Nav -->
 <nav class="navbar navbar-expand-lg bg-dark navbar-light d-none d-lg-block" id="templatemo_nav_top">
    <div class="container text-light">
        <div class="w-100 d-flex justify-content-between">
            <div>
                <i class="fa fa-envelope mx-2"></i>
                <a class="navbar-sm-brand text-light text-decoration-none" href="mailto:roma.coworking.sl@gmail.com">roma.coworking.sl@gmail.com</a>
                <i class="fa fa-phone mx-2"></i>
                <a class="navbar-sm-brand text-light text-decoration-none" href="tel:+54-9-2665-010199">+54-9-2665-010199</a>
            </div>
            <div>
                <a class="text-light" href="https://web.facebook.com/people/RomaCowork/" target="_blank" rel="sponsored"><i class="fab fa-facebook-f fa-sm fa-fw me-2"></i></a>
                <a class="text-light" href="https://www.instagram.com/coworking.roma/" target="_blank"><i class="fab fa-instagram fa-sm fa-fw me-2"></i></a>
               
               
            </div>
        </div>
    </div>
</nav>
<!-- Close Top Nav -->


<!-- Header -->
<nav class="navbar navbar-expand-lg navbar-light shadow">
    <div class="container d-flex justify-content-between align-items-center">

        
        <img class="card-img rounded-0 img-fluid" src="assets/img/roma/icono.jpg" style="width: 200px; height: auto;">

        <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#templatemo_main_nav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="align-self-center collapse navbar-collapse flex-fill  d-lg-flex justify-content-lg-between" id="templatemo_main_nav">
            <div class="flex-fill">
                <ul class="nav navbar-nav d-flex justify-content-between mx-lg-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about.html">Horarios</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="shop.html">Fotos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contacto</a>
                    </li>
                </ul>
            </div>
            
        </div>

    </div>
</nav>
<!-- Close Header -->
    
    <h1>Reservas Oficina A</h1>
    <label for="fecha">Seleccionar fecha: </label>
    <input type="date" id="fecha">
    <table id="calendario">
        <tr>
            <th>Hora</th>
            <th>Oficina 2</th>
        </tr>
    </table>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
        import { getFirestore, collection, query, where, onSnapshot } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDoTNjnjkkgUBDaVI2To5ScA83_q6ZMy-s",
            authDomain: "gamers-a1763.firebaseapp.com",
            projectId: "gamers-a1763",
            storageBucket: "gamers-a1763.appspot.com",
            messagingSenderId: "279036766390",
            appId: "1:279036766390:web:e67ce235630f444d0f5e17"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        const horarios = ["09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00"];
        const calendario = document.getElementById('calendario');
        const fechaInput = document.getElementById('fecha');
fechaInput.addEventListener("change", function () {
    const fechaSeleccionada = new Date(this.value);
    const diaSemana = fechaSeleccionada.getDay(); // 0 = Domingo, 6 = Sábado

    if (diaSemana === 5 || diaSemana === 6) {
        alert("No se pueden seleccionar sábados ni domingos.");
        this.value = ""; // Borra la fecha seleccionada
        actualizarCalendario(); // Para que no se quede con datos viejos
    }
});

        function actualizarCalendario() {
            calendario.innerHTML = `<tr><th>Hora</th><th>Oficina 2</th></tr>`;
            horarios.forEach(hora => {
                const fila = document.createElement('tr');
                fila.innerHTML = `<td>${hora}</td><td class="libre" data-hora="${hora}" data-oficina="oficina2">Libre</td>`;
                calendario.appendChild(fila);
            });
            escucharReservas();
        }

        function escucharReservas() {
            if (!fechaInput.value) return;
            const reservasQuery = query(collection(db, "reservas"), where("fecha", "==", fechaInput.value), where("oficina", "==", "oficina2"));
            onSnapshot(reservasQuery, (snapshot) => {
                const reservas = {};
                snapshot.forEach(doc => {
                    const data = doc.data();
                    reservas[data.hora] = { cliente: data.cliente };
                });
                
                document.querySelectorAll('td.libre, td.ocupado').forEach(celda => {
                    if (reservas[celda.dataset.hora]) {
                        celda.className = 'ocupado';
                        celda.textContent = `Ocupado por ${reservas[celda.dataset.hora].cliente}`;
                    } else {
                        celda.className = 'libre';
                        celda.textContent = 'Libre';
                    }
                });
            });
        }

        fechaInput.addEventListener('change', actualizarCalendario);
        actualizarCalendario();
    </script>
</body>
</html>